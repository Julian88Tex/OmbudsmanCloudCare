minimum_cumulusci_version: "3.11.0"
project:
  name: OmbudsmanCloudCare
  package:
    name: OmbudsmanCloudCare
    api_version: "48.0"
  dependencies:
    - github: "https://github.com/SalesforceFoundation/NPSP"
    - namespace: Mopsy
      version: "1.54"
  source_format: sfdx

tasks:
  deploy_dev_config:
    description: Deploys the post install configuration for an unmanaged DE org
    class_path: cumulusci.tasks.salesforce.Deploy
    options:
      path: unpackaged/config/dev

  dx_status:
    class_path: cumulusci.tasks.sfdx.SFDXOrgTask
    options:
      command: "force:source:status"

  robot:
    options:
      suites: robot/OmbudsmanCloudCare/tests
      options:
        outputdir: robot/OmbudsmanCloudCare/results

  robot_testdoc:
    options:
      path: robot/OmbudsmanCloudCare/tests
      output: robot/OmbudsmanCloudCare/doc/OmbudsmanCloudCare_tests.html
flows:
  config_qa:
    steps:
      3:
        task: load_dataset
  config_dev:
    steps:
      3:
        task: deploy_dev_config
      4:
        task: load_dataset
